{{- template "common.configmap" (list . "fun-bag-agent.configmap") -}}
{{- define "fun-bag-agent.configmap" -}}
{{- end }}

---
{{ template "common.secret" (list . "fun-bag-agent.secret") -}}
{{- define "fun-bag-agent.secret" -}}
{{- end }}
---

{{ template "common.serviceaccount" (list . "fun-bag-agent.serviceaccount" ) -}}
{{- define "fun-bag-agent.serviceaccount" -}}
{{- end }}

---
{{ template "common.networkpolicy" (list . "fun-bag-agent.networkpolicy") -}}
{{- define "fun-bag-agent.networkpolicy" -}}
{{- end }}

---
{{ template "common.sealedsecret" (list . "fun-bag-agent.sealedsecret") -}}
{{- define "fun-bag-agent.sealedsecret" -}}
{{- end }}

---

{{ template "common.service" (list . "fun-bag-agent.service") -}}
{{- define "fun-bag-agent.service" -}}
{{- end }}

---
{{ template "common.deployment" (list . "fun-bag-agent.deployment") -}}
{{- define "fun-bag-agent.deployment" -}}
metadata:
  name: {{ template "common.fullname" . }}
  labels:
    qlik.encryption: "true"
  annotations:
    qlik.encryption.service: '{ "serviceS2SName": "fun-bag-agent", "serviceDisplayName": "fun-bag-agent", "serviceEncryptionContext": "fun-bag-agent" }'
spec:
  template:
    spec:
      containers:
        -
{{ include "common.container" (list (set . "container" .Values.deployment.container) "fun-bag-agent.deployment.container") | indent 8 }}
{{- end }}


{{- define "fun-bag-agent.deployment.container" -}}
livenessProbe:
  httpGet:
    path: /health
    port: http
readinessProbe:
  httpGet:
    path: /ready
    port: http
ports:
  - name: http
    containerPort: {{ .Values.service.port }}
    protocol: TCP
{{- end }}
---
{{ template "common.keyrequest" (list . "fun-bag-agent.keyrequest") -}}
{{- define "fun-bag-agent.keyrequest" -}}
{{- end }}

---
{{ template "common.keyssecret" (list . "fun-bag-agent.keyssecret") -}}
{{- define "fun-bag-agent.keyssecret" -}}
{{- end }}

---
{{ template "common.hpa" (list . "fun-bag-agent.hpa") -}}
{{- define "fun-bag-agent.hpa" -}}
{{- end }}
